{"version":3,"sources":["scripts/main.js"],"names":["request","url","fetch","then","response","ok","Error","status","statusText","headers","get","includes","json","storeData","phones","datas","result","container","i","length","phone","details","element","document","createElement","desc","push","innerHTML","name","JSON","stringify","appendChild","append","listURL","detailsURL","getPhones","getPhonesDetails","BASE_URL","classList","add","Promise","all","map","id","data","body","resolve","startTime","Date","now","catch","err","reject","window","addEventListener"],"mappings":";AAAA,aAgFA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EA9EA,IAAMA,EAAU,SAACC,GACRC,OAAAA,MAAMD,GACVE,KAAK,SAACC,GACD,IAACA,EAASC,GACNC,MAAAA,MAASF,GAAAA,OAAAA,EAASG,OAAYH,OAAAA,OAAAA,EAASI,aAG3C,IAACJ,EAASK,QAAQC,IAAI,gBAAgBC,SAAS,oBAC3CL,MAAAA,MAAM,iCAGPF,OAAAA,EAASQ,UAIhBC,EAAY,SAACC,EAAQC,EAAOC,EAAQC,GACnC,IAAA,IAAIC,EAAI,EAAGA,EAAIJ,EAAOK,OAAQD,IAAK,CAChCE,IAAAA,EAAQN,EAAOI,GACfG,EAAUN,EAAMG,GAEhBI,EAAUC,SAASC,cAAc,KACjCC,EAAOF,SAASC,cAAc,QAEpCR,EAAOU,KACFN,EAAAA,EAAAA,GAAAA,GACAC,IAGLC,EAAQK,UAAeX,GAAAA,OAAAA,EAAOG,OAAYC,OAAAA,OAAAA,EAAMQ,MAChDH,EAAKE,UAAYE,KAAKC,UAAUd,EAAOA,EAAOG,OAAS,IACvDF,EAAUc,YAAYT,GACtBL,EAAUe,OAAOP,KAKfQ,EAAU,wEAEVC,EAAa,oEAGbC,EAAY,WAGTnC,OAAAA,EAFUiC,IAKbG,EAAmB,SAACtB,GAClBuB,IAAAA,EAAWH,EACXjB,EAAYM,SAASC,cAAc,OACnCR,EAAS,GAWRA,OATPC,EAAUqB,UAAUC,IAAI,aAExBC,QAAQC,IAAI3B,EAAO4B,IAAI,SAAAtB,GAASpB,OAAAA,EAAWqC,GAAAA,OAAAA,GAAWjB,OAAAA,EAAMuB,GAAhC,aACzBxC,KAAK,SAAAyC,GACJ/B,EAAUC,EAAQ8B,EAAM5B,EAAQC,KAGpCM,SAASsB,KAAKd,YAAYd,GAEnBD,GAGH8B,EAAU,SAAVA,IACEC,IAAAA,EAAYC,KAAKC,MAEvBd,IACGhC,KAAKiC,GACLc,MAAM,SAAAC,GAKEX,OAJHO,EAAY,IAAOC,KAAKC,OAC1BH,IAGKN,QAAQY,OAAOD,MAI5BE,OAAOC,iBAAiB,OAAQR","file":"main.b4715454.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst request = (url) => {\n  return fetch(url)\n    .then((response) => {\n      if (!response.ok) {\n        throw Error(`${response.status} - ${response.statusText}`);\n      }\n\n      if (!response.headers.get('content-type').includes('application/json')) {\n        throw Error('Content-type is not supported');\n      }\n\n      return response.json();\n    });\n};\n\nconst storeData = (phones, datas, result, container) => {\n  for (let i = 0; i < phones.length; i++) {\n    const phone = phones[i];\n    const details = datas[i];\n\n    const element = document.createElement('p');\n    const desc = document.createElement('span');\n\n    result.push({\n      ...phone,\n      ...details,\n    });\n\n    element.innerHTML = `${result.length}.) ${phone.name}`;\n    desc.innerHTML = JSON.stringify(result[result.length - 1]);\n    container.appendChild(element);\n    container.append(desc);\n  }\n};\n\n// Using request\nconst listURL = 'https://mate-academy.github.io/'\n  + 'phone-catalogue-static/api/phones.json';\nconst detailsURL = 'https://mate-academy.github.io/'\n  + 'phone-catalogue-static/api/phones/';\n\nconst getPhones = () => {\n  const BASE_URL = listURL;\n\n  return request(BASE_URL);\n};\n\nconst getPhonesDetails = (phones) => {\n  const BASE_URL = detailsURL;\n  const container = document.createElement('div');\n  const result = [];\n\n  container.classList.add('container');\n\n  Promise.all(phones.map(phone => request(`${BASE_URL}${phone.id}.json`)))\n    .then(data => {\n      storeData(phones, data, result, container);\n    });\n\n  document.body.appendChild(container);\n\n  return result;\n};\n\nconst resolve = () => {\n  const startTime = Date.now();\n\n  getPhones()\n    .then(getPhonesDetails)\n    .catch(err => {\n      if (startTime + 5000 < Date.now()) {\n        resolve();\n      }\n\n      return Promise.reject(err);\n    });\n};\n\nwindow.addEventListener('load', resolve);\n"]}